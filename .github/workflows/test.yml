name: CI-Test
on: push
env:
  PROJECT_ROOT: .
  UNITY_VERSION: 2019.4.1
jobs:
  testAllModes:
    name: Run Unity Testing
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v2
        with:
          lfs: true

      - uses: actions/cache@v1
        with:
          path: "%LOCALAPPDATA%/Temp/chocolatey"
          key: choco-unity-${{ env.UNITY_VERSION }}

      - run: choco install -y unity --version=${{ env.UNITY_VERSION }}
        shell: cmd

      - run: "\"%PROGRAMFILES%/Unity/Editor/Unity.exe\" -batchmode -createManualActivationFile -logfile"
        shell: cmd

      - uses: actions/upload-artifact@v1
        with:
          name: licensefile
          path: ./*.alf
